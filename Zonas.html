<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mapa de Zonas</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:0;background:#fff;color:#1f2937}
    a { color: inherit; text-decoration: none; }
    .container{max-width:1180px;margin:0 auto;padding:0 20px}
    header {
      position: sticky;
      top: 0;
      z-index: 60;
      padding: 10px 0;
      background: linear-gradient(180deg, rgba(10, 21, 56, .78), rgba(10, 21, 56, .55));
      border-bottom: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 8px 24px rgba(0,0,0,.18);
    }
    .topbar {display:flex;align-items:center;justify-content:center;position:relative;min-height:44px}
    .brandLogo {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      padding: 6px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.96);
      border: 1px solid rgba(255,255,255,.28);
      box-shadow: 0 10px 22px rgba(0,0,0,.22);
    }
    .brandLogo img { height: 44px; width: auto; display: block; }
    .navlinks {
      display: flex;
      gap: 10px;
      padding: 6px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 10px 26px rgba(0,0,0,.18);
    }
    .navlinks a {
      padding: 10px 16px;
      border-radius: 999px;
      font-weight: 800;
      color: rgba(226,232,240,.95);
      letter-spacing: -0.01em;
      transition: background 0.15s ease, transform 0.15s ease, color 0.15s ease;
    }
    .navlinks a:hover {
      background: rgba(255,255,255,.12);
      transform: translateY(-1px);
      color: rgba(255,255,255,.98);
    }
    .navlinks a[aria-current="page"] {
      background: rgba(255,255,255,.16);
      color: #ffffff;
    }

    main{padding:16px 0 28px}
    .layout{display:grid;grid-template-columns:1fr 340px;gap:16px;align-items:start}
    .card{border:1px solid #eee;border-radius:16px;padding:14px}
    #mapWrap{position:relative}
    svg{width:100%;height:auto;max-height:86vh}
    .zone{cursor:pointer;transition:opacity .15s}
    .zone:hover{opacity:.85}
    .tooltip{
      position:absolute;display:none;pointer-events:none;
      background:#111;color:#fff;padding:10px 12px;border-radius:12px;
      font-size:13px;gap:10px;align-items:center
    }
    .tooltip img{width:34px;height:34px;border-radius:50%;object-fit:cover;background:#333}
    .pill{display:inline-block;background:#f3f4f6;border-radius:999px;padding:6px 10px;font-size:12px}
    #panel img{width:96px;height:96px;border-radius:18px;object-fit:cover;background:#f3f4f6}
    button{width:100%;padding:10px 12px;border-radius:12px;border:0;background:#111;color:#fff;cursor:pointer}
    button:disabled{opacity:.4;cursor:not-allowed}
    .cornerLogo {
      position: fixed;
      right: 20px;
      bottom: 20px;
      width: min(140px, 28vw);
      opacity: 0.9;
      filter: drop-shadow(0 12px 20px rgba(15, 23, 42, 0.16));
      pointer-events: none;
      z-index: 50;
    }

    @media (max-width: 960px){
      .layout{grid-template-columns:1fr}
      .topbar{justify-content:flex-end}
      .brandLogo{position:static;transform:none;margin-right:auto}
      .navlinks{gap:6px;padding:5px}
      .navlinks a{padding:8px 12px;font-size:14px}
    }
  </style>
</head>
<body>
  <header>
    <div class="container topbar">
      <a class="brandLogo" href="index.html" aria-label="AgriCheck inicio">
        <img src="agrichecklogo.png" alt="AgriCheck" />
      </a>
      <nav class="navlinks" aria-label="Navegación principal">
        <a href="index.html">Inicio</a>
        <a href="nuestros-productos.html">Nuestros productos</a>
        <a href="Zonas.html" aria-current="page">Zonas</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="layout">
      <div id="mapWrap" class="card">
        <div class="pill">Zonas comerciales</div>

      <div id="mapContainer" aria-label="Mapa de zonas"></div>

      <div id="tt" class="tooltip">
        <img id="ttImg" alt="">
        <div>
          <div id="ttName" style="font-weight:700"></div>
          <div id="ttMeta" style="opacity:.85;font-size:12px"></div>
        </div>
      </div>
    </div>

      <aside id="panel" class="card">
        <div class="pill">Detalle</div>
        <h2 id="pName" style="margin:10px 0 6px">Seleccioná una zona</h2>
        <img id="pImg" alt="">
        <p id="pMeta" style="color:#444;margin:10px 0 6px"></p>
        <p id="pPhone" style="margin:0 0 12px;color:#111"></p>
        <button id="pWa" disabled>Enviar WhatsApp</button>
      </aside>
    </div>
  </main>
  <img class="cornerLogo" src="agrichecklogo.png" alt="" aria-hidden="true" />

<script>
  // ✅ Datos (editá a gusto). Las "keys" deben matchear EXACTO el data-zone del SVG
  const sellers = {
    "Marcelo Lizondo": { color:"#2F8F99", img:"/assets/img/vendors/marcelo.jpg", phone:"5491111111111", meta:"Zona Norte" },
    "Miguel Utrera":   { color:"#3AA6B9", img:"/assets/img/vendors/miguel.jpg",  phone:"5492222222222", meta:"Zona Centro" },
    "Evelyn Rivero-Daiana Gonzalez": { color:"#2E7D32", img:"/assets/img/vendors/evelyn.jpg", phone:"5493333333333", meta:"Zona Oeste" },
    "Andres Perez":    { color:"#1B5E20", img:"/assets/img/vendors/andres.jpg",  phone:"5494444444444", meta:"Zona Sur" },
    "Victoria Vianna": { color:"#FB8C00", img:"/assets/img/vendors/victoria.jpg",phone:"5495555555555", meta:"Zona Andina" },
    "Anibal Epullan":  { color:"#FDD835", img:"/assets/img/vendors/anibal.jpg",  phone:"5496666666666", meta:"Zona Patagonia" }
  };

  const tt = document.getElementById("tt");
  const ttImg = document.getElementById("ttImg");
  const ttName = document.getElementById("ttName");
  const ttMeta = document.getElementById("ttMeta");

  const pName = document.getElementById("pName");
  const pImg = document.getElementById("pImg");
  const pMeta = document.getElementById("pMeta");
  const pPhone = document.getElementById("pPhone");
  const pWa = document.getElementById("pWa");

  function moveTooltip(e){
    const rect = document.getElementById("mapWrap").getBoundingClientRect();
    tt.style.left = (e.clientX - rect.left + 12) + "px";
    tt.style.top  = (e.clientY - rect.top + 12) + "px";
  }

  function openPanel(name){
    const s = sellers[name];
    if(!s) return;
    pName.textContent = name;
    pImg.src = s.img;
    pMeta.textContent = s.meta || "";
    pPhone.textContent = s.phone ? ("+" + s.phone) : "";
    pWa.disabled = !s.phone;
    pWa.onclick = () => {
      const msg = encodeURIComponent(`Hola ${name}, te contacto por tu zona.`);
      window.open(`https://wa.me/${s.phone}?text=${msg}`, "_blank");
    };
  }

  async function loadMap(){
    const mapContainer = document.getElementById("mapContainer");
    const response = await fetch("./argentina-zonas.svg");
    if(!response.ok) throw new Error("No se pudo cargar el mapa SVG");

    const svgText = await response.text();
    mapContainer.innerHTML = svgText;

    mapContainer.querySelectorAll("polygon[title]").forEach(zone => {
      zone.classList.add("zone");
      zone.dataset.zone = zone.getAttribute("title");
    });
  }

  // ✅ Inicializar zonas (se ejecuta cuando el SVG está en el DOM)
  function initZones(){
    const zones = document.querySelectorAll(".zone");
    zones.forEach(z => {
      const name = z.dataset.zone;
      const s = sellers[name];
      z.style.fill = s?.color ?? "#9ca3af";
      z.style.stroke = "#ffffff";
      z.style.strokeWidth = "3";

      z.addEventListener("mouseenter", (e)=>{
        ttName.textContent = name;
        ttMeta.textContent = s?.meta ?? "Sin datos";
        ttImg.src = s?.img ?? "";
        tt.style.display = "flex";
        moveTooltip(e);
      });
      z.addEventListener("mousemove", moveTooltip);
      z.addEventListener("mouseleave", ()=> tt.style.display = "none");
      z.addEventListener("click", ()=> openPanel(name));
    });
  }

  window.addEventListener("load", async () => {
    try {
      await loadMap();
      initZones();
    } catch (error) {
      document.getElementById("mapContainer").innerHTML = "<p>No se pudo cargar el mapa.</p>";
      console.error(error);
    }
  });
</script>
</body>
</html>
